// ==========================================================================
// Project:   Ember Data
// Copyright: ©2011-2012 Tilde Inc. and contributors.
//            Portions ©2011 Living Social Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================



// Last commit: acf32df (2013-04-19 10:28:39 -0700)


(function(){window.DS=Ember.Namespace.create({CURRENT_API_REVISION:12})})(),function(){Ember.Date=Ember.Date||{};var e=Date.parse,t=[1,4,5,6,7,10,11];Ember.Date.parse=function(n){var r,i,s=0;if(i=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(n)){for(var o=0,u;u=t[o];++o)i[u]=+i[u]||0;i[2]=(+i[2]||1)-1,i[3]=+i[3]||1,i[8]!=="Z"&&i[9]!==undefined&&(s=i[10]*60+i[11],i[9]==="+"&&(s=0-s)),r=Date.UTC(i[1],i[2],i[3],i[4],i[5]+s,i[6],i[7])}else r=e?e(n):NaN;return r};if(Ember.EXTEND_PROTOTYPES===!0||Ember.EXTEND_PROTOTYPES.Date)Date.parse=Ember.Date.parse}(),function(){}(),function(){var e=Ember.DeferredMixin,t=Ember.Evented,n=Ember.run,r=Ember.get,i=Ember.Mixin.create(t,e,{init:function(){this._super.apply(this,arguments),this.one("didLoad",function(){n(this,"resolve",this)}),r(this,"isLoaded")&&this.trigger("didLoad")}});DS.LoadPromise=i}(),function(){var e=Ember.get,t=Ember.set,n=DS.LoadPromise;DS.RecordArray=Ember.ArrayProxy.extend(Ember.Evented,n,{type:null,content:null,isLoaded:!1,isUpdating:!1,store:null,objectAtContent:function(t){var n=e(this,"content"),r=n.objectAt(t),i=e(this,"store");if(r)return i.recordForReference(r)},materializedObjectAt:function(t){var n=e(this,"content").objectAt(t);if(!n)return;if(e(this,"store").recordIsMaterialized(n))return this.objectAt(t)},update:function(){if(e(this,"isUpdating"))return;var t=e(this,"store"),n=e(this,"type");t.fetchAll(n,this)},addReference:function(t){e(this,"content").addObject(t)},removeReference:function(t){e(this,"content").removeObject(t)}})}(),function(){var e=Ember.get,t=Ember.set,n=Ember.run.once,r=Ember.EnumerableUtils.forEach;DS.RecordArrayManager=Ember.Object.extend({init:function(){this.filteredRecordArrays=Ember.MapWithDefault.create({defaultValue:function(){return[]}}),this.changedReferences=[]},referenceDidChange:function(e){this.changedReferences.push(e),n(this,this.updateRecordArrays)},recordArraysForReference:function(e){return e.recordArrays=e.recordArrays||Ember.OrderedSet.create(),e.recordArrays},updateRecordArrays:function(){r(this.changedReferences,function(t){var n=t.type,r=this.filteredRecordArrays.get(n),i;r.forEach(function(r){i=e(r,"filterFunction"),this.updateRecordArray(r,i,n,t)},this);var s=t.loadingRecordArrays;if(s){for(var o=0,u=s.length;o<u;o++)s[o].loadedRecord();t.loadingRecordArrays=[]}},this)},updateRecordArray:function(e,t,n,r){var i,s;t?(s=this.store.recordForReference(r),i=t(s)):i=!0;var o=this.recordArraysForReference(r);i?(o.add(e),e.addReference(r)):i||(o.remove(e),e.removeReference(r))},remove:function(t){var n=e(t,"reference"),r=n.recordArrays||[];r.forEach(function(e){e.removeReference(n)})},updateFilter:function(t,n,r){var i=this.store.typeMapFor(n),s=i.references,o,u,a,f;for(var l=0,c=s.length;l<c;l++)o=s[l],a=!1,u=o.data,typeof u=="object"&&((f=o.record)?e(f,"isDeleted")||(a=!0):a=!0,a&&this.updateRecordArray(t,r,n,o))},createManyArray:function(e,t){var n=DS.ManyArray.create({type:e,content:t,store:this.store});return t.forEach(function(e){var t=this.recordArraysForReference(e);t.add(n)},this),n},registerFilteredRecordArray:function(e,t,n){var r=this.filteredRecordArrays.get(t);r.push(e),this.updateFilter(e,t,n)},registerWaitingRecordArray:function(e,t){var n=t.loadingRecordArrays||[];n.push(e),t.loadingRecordArrays=n}})}(),function(){var e=Ember.get;DS.FilteredRecordArray=DS.RecordArray.extend({filterFunction:null,isLoaded:!0,replace:function(){var t=e(this,"type").toString();throw new Error("The result of a client-side filter (on "+t+") is immutable.")},updateFilter:Ember.observer(function(){var t=e(this,"manager");t.updateFilter(this,e(this,"type"),e(this,"filterFunction"))},"filterFunction")})}(),function(){var e=Ember.get,t=Ember.set;DS.AdapterPopulatedRecordArray=DS.RecordArray.extend({query:null,replace:function(){var t=e(this,"type").toString();throw new Error("The result of a server query (on "+t+") is immutable.")},load:function(e){this.beginPropertyChanges(),t(this,"content",Ember.A(e)),t(this,"isLoaded",!0),this.endPropertyChanges();var n=this;Ember.run.once(function(){n.trigger("didLoad")})}})}(),function(){var e=Ember.get,t=Ember.set;DS.ManyArray=DS.RecordArray.extend({init:function(){this._super.apply(this,arguments),this._changesToSync=Ember.OrderedSet.create()},owner:null,isPolymorphic:!1,isLoaded:!1,loadingRecordsCount:function(e){this.loadingRecordsCount=e},loadedRecord:function(){this.loadingRecordsCount--,this.loadingRecordsCount===0&&(t(this,"isLoaded",!0),this.trigger("didLoad"))},fetch:function(){var t=e(this,"content"),n=e(this,"store"),r=e(this,"owner");n.fetchUnloadedReferences(t,r)},replaceContent:function(t,n,r){r=r.map(function(t){return e(t,"reference")},this),this._super(t,n,r)},arrangedContentDidChange:function(){this.fetch()},arrayContentWillChange:function(t,n,r){var i=e(this,"owner"),s=e(this,"name");if(!i._suspendedRelationships)for(var o=t;o<t+n;o++){var u=e(this,"content").objectAt(o),a=DS.RelationshipChange.createChange(i.get("reference"),u,e(this,"store"),{parentType:i.constructor,changeType:"remove",kind:"hasMany",key:s});this._changesToSync.add(a)}return this._super.apply(this,arguments)},arrayContentDidChange:function(t,n,r){this._super.apply(this,arguments);var i=e(this,"owner"),s=e(this,"name"),o=e(this,"store");if(!i._suspendedRelationships){for(var u=t;u<t+r;u++){var a=e(this,"content").objectAt(u),f=DS.RelationshipChange.createChange(i.get("reference"),a,o,{parentType:i.constructor,changeType:"add",kind:"hasMany",key:s});f.hasManyName=s,this._changesToSync.add(f)}this._changesToSync.forEach(function(e){e.sync()}),DS.OneToManyChange.ensureSameTransaction(this._changesToSync,o),this._changesToSync.clear()}},createRecord:function(t,n){var r=e(this,"owner"),i=e(r,"store"),s=e(this,"type"),o;return n=n||e(r,"transaction"),o=i.createRecord.call(i,s,t,n),this.pushObject(o),o}})}(),function(){}(),function(){var e=Ember.get,t=Ember.set,n=Ember.EnumerableUtils.forEach;DS.Transaction=Ember.Object.extend({init:function(){t(this,"records",Ember.OrderedSet.create()),t(this,"relationships",Ember.OrderedSet.create())},createRecord:function(t,n){var r=e(this,"store");return r.createRecord(t,n,this)},isEqualOrDefault:function(t){if(this===t||t===e(this,"store.defaultTransaction"))return!0},isDefault:Ember.computed(function(){return this===e(this,"store.defaultTransaction")}),add:function(e){this.adoptRecord(e)},relationshipBecameDirty:function(t){e(this,"relationships").add(t)},relationshipBecameClean:function(t){e(this,"relationships").remove(t)},commit:function(){var n=e(this,"store"),r=e(n,"_adapter"),i=e(n,"defaultTransaction");this===i&&t(n,"defaultTransaction",n.transaction()),this.removeCleanRecords();var s=e(this,"relationships"),o=this._commitDetails();(!o.created.isEmpty()||!o.updated.isEmpty()||!o.deleted.isEmpty()||!o.relationships.isEmpty())&&r.commit(n,o),s.forEach(function(e){e.destroy()})},_commitDetails:function(){var t=e(this,"relationships"),n={created:Ember.OrderedSet.create(),updated:Ember.OrderedSet.create(),deleted:Ember.OrderedSet.create(),relationships:t},r=e(this,"records");return r.forEach(function(t){if(!e(t,"isDirty"))return;t.send("willCommit"),n[e(t,"dirtyType")].add(t)}),n},rollback:function(){var t=e(this,"store"),n=Ember.OrderedSet.create(),r=e(this,"relationships");r.forEach(function(e){n.add(e.firstRecordReference),n.add(e.secondRecordReference),e.destroy()}),r.clear();var i=e(this,"records");i.forEach(function(e){if(!e.get("isDirty"))return;e.send("rollback")}),this.removeCleanRecords(),n.forEach(function(e){if(e&&e.record){var t=e.record;t.suspendRelationshipObservers(function(){t.reloadHasManys()})}},this)},remove:function(t){var n=e(this,"store.defaultTransaction");n.adoptRecord(t)},removeCleanRecords:function(){var t=e(this,"records");t.forEach(function(e){e.get("isDirty")||this.remove(e)},this)},adoptRecord:function(n){var r=e(n,"transaction");r&&r.removeRecord(n),e(this,"records").add(n),t(n,"transaction",this)},removeRecord:function(t){e(this,"records").remove(t)}}),DS.Transaction.reopenClass({ensureSameTransaction:function(t){var r=Ember.A();n(t,function(t){t&&r.pushObject(e(t,"transaction"))});var i=r.reduce(function(t,n){return!e(n,"isDefault")&&t===null?n:t},null);return i?n(t,function(e){e&&i.add(e)}):i=r.objectAt(0),i}})}(),function(){var e=Ember.get,t=function(e,t){return e},n=function(e,t){return e},r=function(e,t){return t};DS._Mappable=Ember.Mixin.create({createInstanceMapFor:function(e){var t=Ember.metaPath(this,["DS.Mappable"],!0);t.values=t.values||{};if(t.values[e])return t.values[e];var n=t.values[e]=new Ember.Map,r=this.constructor;while(r&&r!==DS.Store)this._copyMap(e,r,n),r=r.superclass;return t.values[e]=n,n},_copyMap:function(e,i,s){function a(e,o){var u=(i.transformMapKey||n)(e,o),a=(i.transformMapValue||r)(e,o),f=s.get(u),l=a;f&&(l=(this.constructor.resolveMapConflict||t)(f,l)),s.set(u,l)}var o=Ember.metaPath(i,["DS.Mappable"],!0),u=o[e];u&&u.forEach(a,this)}}),DS._Mappable.generateMapFunctionFor=function(e,t){return function(n,r){var i=Ember.metaPath(this,["DS.Mappable"],!0),s=i[e]||Ember.MapWithDefault.create({defaultValue:function(){return{}}});t.call(this,n,r,s),i[e]=s}}}(),function(){var e=Ember.get,t=Ember.set,n=Ember.run.once,r=Ember.isNone,i=Ember.EnumerableUtils.forEach,s=Ember.EnumerableUtils.map,o="unloaded",u="loading",a={materialized:!0},f={created:!0},l=function(e){return e==null?null:e+""};DS.Store=Ember.Object.extend(DS._Mappable,{init:function(){var n=e(this,"revision");if(n!==DS.CURRENT_API_REVISION&&!Ember.ENV.TESTING)throw new Error("Error: The Ember Data library has had breaking API changes since the last time you updated the library. Please review the list of breaking changes at https://github.com/emberjs/data/blob/master/BREAKING_CHANGES.md, then update your store's `revision` property to "+DS.CURRENT_API_REVISION);(!e(DS,"defaultStore")||e(this,"isDefaultStore"))&&t(DS,"defaultStore",this),this.typeMaps={},this.recordArrayManager=DS.RecordArrayManager.create({store:this}),this.relationshipChanges={},t(this,"currentTransaction",this.transaction()),t(this,"defaultTransaction",this.transaction())},transaction:function(){return DS.Transaction.create({store:this})},materializeData:function(t){var n=e(t,"reference"),r=n.data,i=this.adapterForType(t.constructor);n.data=a,t.setupData(),r!==f&&i.materialize(t,r,n.prematerialized)},adapter:Ember.computed(function(){return"DS.RESTAdapter"}).property(),serialize:function(e,t){return this.adapterForType(e.constructor).serialize(e,t)},_adapter:Ember.computed(function(){var t=e(this,"adapter");return typeof t=="string"&&(t=e(this,t,!1)||e(Ember.lookup,t)),DS.Adapter.detect(t)&&(t=t.create()),t}).property("adapter"),clientIdCounter:1,createRecord:function(n,i,s){i=i||{};var o=n._create({store:this});s=s||e(this,"defaultTransaction"),s.adoptRecord(o);var u=i.id;if(r(u)){var a=this.adapterForType(n);a&&a.generateIdForRecord&&(u=l(a.generateIdForRecord(this,o)),i.id=u)}u=l(u);var c=this.createReference(n,u);return c.data=f,t(o,"reference",c),c.record=o,o.loadedData(),o.setupData(),o.setProperties(i),Ember.run(o,"resolve",o),o},deleteRecord:function(e){e.deleteRecord()},unloadRecord:function(e){e.unloadRecord()},find:function(e,t){return t===undefined?this.findAll(e):Ember.typeOf(t)==="object"?this.findQuery(e,t):this.findById(e,l(t))},findById:function(e,t){var n;if(this.hasReferenceForId(e,t)){n=this.referenceForId(e,t);if(n.data!==o)return this.recordForReference(n)}n||(n=this.createReference(e,t)),n.data=u;var r=this.materializeRecord(n);if(n.data===u){var i=this.adapterForType(e);i.find(this,e,t)}return r},reloadRecord:function(t){var n=t.constructor,r=this.adapterForType(n),i=e(t,"id");r.find(this,n,i)},recordForReference:function(e){var t=e.record;return t||(t=this.materializeRecord(e)),t},unloadedReferences:function(e){var t=[];for(var n=0,r=e.length;n<r;n++){var i=e[n];i.data===o&&(t.push(i),i.data=u)}return t},fetchUnloadedReferences:function(e,t){var n=this.unloadedReferences(e);this.fetchMany(n,t)},fetchMany:function(e,t){if(!e.length)return;var n=Ember.MapWithDefault.create({defaultValue:function(){return Ember.A()}});i(e,function(e){n.get(e.type).push(e)}),i(n,function(e){var r=n.get(e),i=s(r,function(e){return e.id}),o=this.adapterForType(e);o.findMany(this,e,i,t)},this)},hasReferenceForId:function(e,t){return t=l(t),!!this.typeMapFor(e).idToReference[t]},referenceForId:function(e,t){t=l(t);var n=this.typeMapFor(e).idToReference[t];return n||(n=this.createReference(e,t),n.data=o),n},findMany:function(e,t,n,r){if(!Ember.isArray(t)){var i=this.adapterForType(e);return i&&i.findHasMany?i.findHasMany(this,n,r,t):t!==undefined,this.recordArrayManager.createManyArray(e,Ember.A())}var o=s(t,function(t){return typeof t!="object"&&t!==null?this.referenceForId(e,t):t},this),u=this.unloadedReferences(o),a=this.recordArrayManager.createManyArray(e,Ember.A(o)),f=this.loadingRecordArrays,l,c,h,p;a.loadingRecordsCount(u.length);if(u.length){for(h=0,p=u.length;h<p;h++)l=u[h],this.recordArrayManager.registerWaitingRecordArray(a,l);this.fetchMany(u,n)}else a.set("isLoaded",!0),Ember.run.once(function(){a.trigger("didLoad")});return a},findQuery:function(e,t){var n=DS.AdapterPopulatedRecordArray.create({type:e,query:t,content:Ember.A([]),store:this}),r=this.adapterForType(e);return r.findQuery(this,e,t,n),n},findAll:function(e){return this.fetchAll(e,this.all(e))},fetchAll:function(e,n){var r=this.adapterForType(e),i=this.typeMapFor(e).metadata.since;return t(n,"isUpdating",!0),r.findAll(this,e,i),n},metaForType:function(e,n,r){var i=this.typeMapFor(e).metadata;t(i,n,r)},didUpdateAll:function(e){var n=this.typeMapFor(e).findAllCache;t(n,"isUpdating",!1)},all:function(e){var t=this.typeMapFor(e),n=t.findAllCache;if(n)return n;var r=DS.RecordArray.create({type:e,content:Ember.A([]),store:this,isLoaded:!0});return this.recordArrayManager.registerFilteredRecordArray(r,e),t.findAllCache=r,r},filter:function(e,t,n){arguments.length===3?this.findQuery(e,t):arguments.length===2&&(n=t);var r=DS.FilteredRecordArray.create({type:e,content:Ember.A([]),store:this,manager:this.recordArrayManager,filterFunction:n});return this.recordArrayManager.registerFilteredRecordArray(r,e,n),r},recordIsLoaded:function(e,t){return this.hasReferenceForId(e,t)?typeof this.referenceForId(e,t).data=="object":!1},dataWasUpdated:function(t,n,r){if(e(r,"isDeleted"))return;typeof n.data=="object"&&this.recordArrayManager.referenceDidChange(n)},scheduleSave:function(t){e(this,"currentTransaction").add(t),n(this,"flushSavedRecords")},flushSavedRecords:function(){e(this,"currentTransaction").commit(),t(this,"currentTransaction",this.transaction())},save:function(){n(this,"commit")},commit:function(){e(this,"defaultTransaction").commit()},didSaveRecord:function(e,t){e.adapterDidCommit(),t?(this.updateId(e,t),this.updateRecordData(e,t)):this.didUpdateAttributes(e)},didSaveRecords:function(e,t){var n=0;e.forEach(function(e){this.didSaveRecord(e,t&&t[n++])},this)},recordWasInvalid:function(e,t){e.adapterDidInvalidate(t)},recordWasError:function(e){e.adapterDidError()},didUpdateAttribute:function(e,t,n){e.adapterDidUpdateAttribute(t,n)},didUpdateAttributes:function(e){e.eachAttribute(function(t){this.didUpdateAttribute(e,t)},this)},didUpdateRelationship:function(t,n){var r=e(t,"reference").clientId,i=this.relationshipChangeFor(r,n);i&&i.adapterDidUpdate()},didUpdateRelationships:function(t){var n=this.relationshipChangesFor(e(t,"reference"));for(var r in n){if(!n.hasOwnProperty(r))continue;n[r].adapterDidUpdate()}},didReceiveId:function(t,n){var r=this.typeMapFor(t.constructor),i=e(t,"clientId"),s=e(t,"id");r.idToCid[n]=i,this.clientIdToId[i]=n},updateRecordData:function(t,n){e(t,"reference").data=n,t.didChangeData()},updateId:function(t,n){var r=t.constructor,i=this.typeMapFor(r),s=e(t,"reference"),o=e(t,"id"),u=this.preprocessData(r,n);i.idToReference[u]=s,s.id=u},preprocessData:function(e,t){return this.adapterForType(e).extractId(e,t)},typeMapFor:function(t){var n=e(this,"typeMaps"),r=Ember.guidFor(t),i;return i=n[r],i?i:(i={idToReference:{},references:[],metadata:{}},n[r]=i,i)},load:function(e,t,r){var i;if(typeof t=="number"||typeof t=="string")i=t,t=r,r=null;r&&r.id?i=r.id:i===undefined&&(i=this.preprocessData(e,t)),i=l(i);var s=this.referenceForId(e,i);return s.record&&n(s.record,"loadedData"),s.data=t,s.prematerialized=r,this.recordArrayManager.referenceDidChange(s),s},loadMany:function(e,t,n){return n===undefined&&(n=t,t=s(n,function(t){return this.preprocessData(e,t)},this)),s(t,function(t,r){return this.load(e,t,n[r])},this)},loadHasMany:function(e,n,r){var i=e.get(n+".type"),o=s(r,function(e){return{id:e,type:i}});e.materializeHasMany(n,o),e.hasManyDidChange(n);var u=e.cacheFor(n);u&&(t(u,"isLoaded",!0),u.trigger("didLoad"))},createReference:function(e,t){var n=this.typeMapFor(e),r=n.idToReference,i={id:t,clientId:this.clientIdCounter++,type:e};return t&&(r[t]=i),n.references.push(i),i},materializeRecord:function(t){var n=t.type._create({id:t.id,store:this,reference:t});return t.record=n,e(this,"defaultTransaction").adoptRecord(n),n.loadingData(),typeof t.data=="object"&&n.loadedData(),n},dematerializeRecord:function(t){var n=e(t,"reference"),r=n.type,i=n.id,s=this.typeMapFor(r);t.updateRecordArrays(),i&&delete s.idToReference[i];var o=s.references.indexOf(n);s.references.splice(o,1)},willDestroy:function(){e(DS,"defaultStore")===this&&t(DS,"defaultStore",null)},addRelationshipChangeFor:function(e,t,n,r,i){var s=e.clientId,o=n?n.clientId:n,u=t+r,a=this.relationshipChanges;s in a||(a[s]={}),o in a[s]||(a[s][o]={}),u in a[s][o]||(a[s][o][u]={}),a[s][o][u][i.changeType]=i},removeRelationshipChangeFor:function(e,t,n,r,i){var s=e.clientId,o=n?n.clientId:n,u=this.relationshipChanges,a=t+r;if(!(s in u&&o in u[s]&&a in u[s][o]))return;delete u[s][o][a][i]},relationshipChangeFor:function(e,t,n,r,i){var s=this.relationshipChanges,o=t+r;if(e in s&&n in s[e])return i?s[e][n][o][i]:s[e][n][o].add||s[e][n][o].remove;return},relationshipChangePairsFor:function(e){var t=[];if(!e)return t;var n=this.relationshipChanges[e.clientId];for(var r in n)if(n.hasOwnProperty(r))for(var i in n[r])n[r].hasOwnProperty(i)&&t.push(n[r][i]);return t},relationshipChangesFor:function(e){var t=[];if(!e)return t;var n=this.relationshipChangePairsFor(e);return i(n,function(e){var n=e.add,r=e.remove;n&&t.push(n),r&&t.push(r)}),t},adapterForType:function(e){this._adaptersMap=this.createInstanceMapFor("adapters");var t=this._adaptersMap.get(e);return t?t:this.get("_adapter")},recordAttributeDidChange:function(e,t,n,r){var i=e.record,s=new Ember.OrderedSet,o=this.adapterForType(i.constructor);o.dirtyRecordsForAttributeChange&&o.dirtyRecordsForAttributeChange(s,i,t,n,r),s.forEach(function(e){e.adapterDidDirty()})},recordBelongsToDidChange:function(e,t,n){var r=this.adapterForType(t.constructor);r.dirtyRecordsForBelongsToChange&&r.dirtyRecordsForBelongsToChange(e,t,n)},recordHasManyDidChange:function(e,t,n){var r=this.adapterForType(t.constructor);r.dirtyRecordsForHasManyChange&&r.dirtyRecordsForHasManyChange(e,t,n)}}),DS.Store.reopenClass({registerAdapter:DS._Mappable.generateMapFunctionFor("adapters",function(e,t,n){n.set(e,t)}),transformMapKey:function(t){if(typeof t=="string"){var n;return n=e(Ember.lookup,t),n}return t},transformMapValue:function(e,t){return Ember.Object.detect(t)?t.create():t}})}(),function(){var e=Ember.get,t=Ember.set,n=Ember.run.once,r=Ember.ArrayPolyfills.map,i=Ember.computed(function(t){var n=e(this,"parentState");if(n)return e(n,t)}).property(),s=function(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!0;return!1},o=function(t){var n=e(t,"record");n.materializeData()},u=function(t,n){n.oldValue=e(e(t,"record"),n.name);var r=DS.AttributeChange.createChange(n);e(t,"record")._changesToSync[n.name]=r},a=function(t,n){var r=e(t,"record")._changesToSync[n.name];r.value=e(e(t,"record"),n.name),r.sync()};DS.State=Ember.State.extend({isLoading:i,isLoaded:i,isReloading:i,isDirty:i,isSaving:i,isDeleted:i,isError:i,isNew:i,isValid:i,dirtyType:i});var f=DS.State.extend({initialState:"uncommitted",isDirty:!0,uncommitted:DS.State.extend({willSetProperty:u,didSetProperty:a,becomeDirty:Ember.K,willCommit:function(e){e.transitionTo("inFlight")},becameClean:function(t){var n=e(t,"record");n.withTransaction(function(e){e.remove(n)}),t.transitionTo("loaded.materializing")},becameInvalid:function(e){e.transitionTo("invalid")},rollback:function(t){e(t,"record").rollback()}}),inFlight:DS.State.extend({isSaving:!0,enter:function(t){var n=e(t,"record");n.becameInFlight()},didCommit:function(t){var n=e(this,"dirtyType"),r=e(t,"record");r.withTransaction(function(e){e.remove(r)}),t.transitionTo("saved"),t.send("invokeLifecycleCallbacks",n)},becameInvalid:function(n,r){var i=e(n,"record");t(i,"errors",r),n.transitionTo("invalid"),n.send("invokeLifecycleCallbacks")},becameError:function(e){e.transitionTo("error"),e.send("invokeLifecycleCallbacks")}}),invalid:DS.State.extend({isValid:!1,exit:function(t){var n=e(t,"record");n.withTransaction(function(e){e.remove(n)})},deleteRecord:function(t){t.transitionTo("deleted"),e(t,"record").clearRelationships()},willSetProperty:u,didSetProperty:function(n,r){var i=e(n,"record"),o=e(i,"errors"),u=r.name;t(o,u,null),s(o)||n.send("becameValid"),a(n,r)},becomeDirty:Ember.K,rollback:function(e){e.send("becameValid"),e.send("rollback")},becameValid:function(e){e.transitionTo("uncommitted")},invokeLifecycleCallbacks:function(t){var n=e(t,"record");n.trigger("becameInvalid",n)}})}),l=f.create({dirtyType:"created",isNew:!0}),c=f.create({dirtyType:"updated"});l.states.uncommitted.reopen({deleteRecord:function(t){var n=e(t,"record");n.clearRelationships(),t.transitionTo("deleted.saved")}}),l.states.uncommitted.reopen({rollback:function(e){this._super(e),e.transitionTo("deleted.saved")}}),c.states.uncommitted.reopen({deleteRecord:function(t){var n=e(t,"record");t.transitionTo("deleted"),n.clearRelationships()}});var h={rootState:Ember.State.create({isLoading:!1,isLoaded:!1,isReloading:!1,isDirty:!1,isSaving:!1,isDeleted:!1,isError:!1,isNew:!1,isValid:!0,empty:DS.State.create({loadingData:function(e){e.transitionTo("loading")},loadedData:function(e){e.transitionTo("loaded.created")}}),loading:DS.State.create({isLoading:!0,loadedData:o,materializingData:function(e){e.transitionTo("loaded.materializing.firstTime")}}),loaded:DS.State.create({initialState:"saved",isLoaded:!0,materializing:DS.State.create({willSetProperty:Ember.K,didSetProperty:Ember.K,didChangeData:o,finishedMaterializing:function(e){e.transitionTo("loaded.saved")},firstTime:DS.State.create({isLoaded:!1,exit:function(t){var r=e(t,"record");n(function(){r.trigger("didLoad")})}})}),reloading:DS.State.create({isReloading:!0,enter:function(t){var n=e(t,"record"),r=e(n,"store");r.reloadRecord(n)},exit:function(t){var r=e(t,"record");n(r,"trigger","didReload")},loadedData:o,materializingData:function(e){e.transitionTo("loaded.materializing")}}),saved:DS.State.create({willSetProperty:u,didSetProperty:a,didChangeData:o,loadedData:o,reloadRecord:function(e){e.transitionTo("loaded.reloading")},materializingData:function(e){e.transitionTo("loaded.materializing")},becomeDirty:function(e){e.transitionTo("updated")},deleteRecord:function(t){t.transitionTo("deleted"),e(t,"record").clearRelationships()},unloadRecord:function(t){var n=e(t,"record");n.clearRelationships(),t.transitionTo("deleted.saved")},invokeLifecycleCallbacks:function(t,n){var r=e(t,"record");n==="created"?r.trigger("didCreate",r):r.trigger("didUpdate",r)}}),created:l,updated:c}),deleted:DS.State.create({initialState:"uncommitted",dirtyType:"deleted",isDeleted:!0,isLoaded:!0,isDirty:!0,setup:function(t){var n=e(t,"record"),r=e(n,"store");r.recordArrayManager.remove(n)},uncommitted:DS.State.create({willCommit:function(e){e.transitionTo("inFlight")},rollback:function(t){e(t,"record").rollback()},becomeDirty:Ember.K,becameClean:function(t){var n=e(t,"record");n.withTransaction(function(e){e.remove(n)}),t.transitionTo("loaded.materializing")}}),inFlight:DS.State.create({isSaving:!0,enter:function(t){var n=e(t,"record");n.becameInFlight()},didCommit:function(t){var n=e(t,"record");n.withTransaction(function(e){e.remove(n)}),t.transitionTo("saved"),t.send("invokeLifecycleCallbacks")}}),saved:DS.State.create({isDirty:!1,setup:function(t){var n=e(t,"record"),r=e(n,"store");r.dematerializeRecord(n)},invokeLifecycleCallbacks:function(t){var n=e(t,"record");n.trigger("didDelete",n)}})}),error:DS.State.create({isError:!0,invokeLifecycleCallbacks:function(t){var n=e(t,"record");n.trigger("becameError",n)}})})};DS.StateManager=Ember.StateManager.extend({record:null,initialState:"rootState",states:h,unhandledEvent:function(t,n){var i=t.get("record"),s=[].slice.call(arguments,2),o;throw o="Attempted to handle event `"+n+"` ",o+="on "+i.toString()+" while in state ",o+=e(t,"currentState.path")+". Called with ",o+=r.call(s,function(e){return Ember.inspect(e)}).join(", "),new Ember.Error(o)}})}(),function(){var e=DS.LoadPromise,t=Ember.get,n=Ember.set,r=Ember.EnumerableUtils.map,i=Ember.computed(function(e,n){return t(t(this,"stateManager.currentState"),e)}).property("stateManager.currentState").readOnly();DS.Model=Ember.Object.extend(Ember.Evented,e,{isLoading:i,isLoaded:i,isReloading:i,isDirty:i,isSaving:i,isDeleted:i,isError:i,isNew:i,isValid:i,dirtyType:i,clientId:null,id:null,transaction:null,stateManager:null,errors:null,serialize:function(e){var n=t(this,"store");return n.serialize(this,e)},toJSON:function(e){var t=DS.JSONSerializer.create();return t.serialize(this,e)},didLoad:Ember.K,didReload:Ember.K,didUpdate:Ember.K,didCreate:Ember.K,didDelete:Ember.K,becameInvalid:Ember.K,becameError:Ember.K,data:Ember.computed(function(){return this._data||this.materializeData(),this._data}).property(),materializeData:function(){this.send("materializingData"),t(this,"store").materializeData(this),this.suspendRelationshipObservers(function(){this.notifyPropertyChange("data")})},_data:null,init:function(){this._super();var e=DS.StateManager.create({record:this});n(this,"stateManager",e),this._setup(),e.goToState("empty")},_setup:function(){this._relationshipChanges={},this._changesToSync={}},send:function(e,n){return t(this,"stateManager").send(e,n)},withTransaction:function(e){var n=t(this,"transaction");n&&e(n)},loadingData:function(){this.send("loadingData")},loadedData:function(){this.send("loadedData")},didChangeData:function(){this.send("didChangeData")},reload:function(){this.send("reloadRecord")},deleteRecord:function(){this.send("deleteRecord")},unloadRecord:function(){this.send("unloadRecord")},clearRelationships:function(){this.eachRelationship(function(e,t){t.kind==="belongsTo"?n(this,e,null):t.kind==="hasMany"&&this.clearHasMany(t)},this)},updateRecordArrays:function(){var e=t(this,"store");e&&e.dataWasUpdated(this.constructor,t(this,"reference"),this)},adapterDidCommit:function(){var e=t(this,"data").attributes;t(this.constructor,"attributes").forEach(function(n,r){e[n]=t(this,n)},this),this.send("didCommit"),this.updateRecordArraysLater()},adapterDidDirty:function(){this.send("becomeDirty"),this.updateRecordArraysLater()},dataDidChange:Ember.observer(function(){this.reloadHasManys(),this.send("finishedMaterializing")},"data"),reloadHasManys:function(){var e=t(this.constructor,"relationshipsByName");this.updateRecordArraysLater(),e.forEach(function(e,t){t.kind==="hasMany"&&this.hasManyDidChange(t.key)},this)},hasManyDidChange:function(e){var i=this.cacheFor(e);if(i){var s=t(this.constructor,"relationshipsByName").get(e).type,o=t(this,"store"),u=this._data.hasMany[e]||[],a=r(u,function(e){return typeof e=="object"?e.clientId?e:o.referenceForId(e.type,e.id):o.referenceForId(s,e)});n(i,"content",Ember.A(a))}},updateRecordArraysLater:function(){Ember.run.once(this,this.updateRecordArrays)},setupData:function(e){this._data={attributes:{},belongsTo:{},hasMany:{},id:null}},materializeId:function(e){n(this,"id",e)},materializeAttributes:function(e){this._data.attributes=e},materializeAttribute:function(e,t){this._data.attributes[e]=t},materializeHasMany:function(e,t){var n=typeof t;t&&n!=="string"&&t.length>1&&Ember.assert("materializeHasMany expects tuples, references or opaque token, not "+t[0],t[0].hasOwnProperty("id")&&t[0].type);if(n==="string")this._data.hasMany[e]=t;else{var r=t;t&&Ember.isArray(t)&&(r=this._convertTuplesToReferences(t)),this._data.hasMany[e]=r}},materializeBelongsTo:function(e,t){t&&Ember.assert("materializeBelongsTo expects a tuple or a reference, not a "+t,!t||t.hasOwnProperty("id")&&t.hasOwnProperty("type")),this._data.belongsTo[e]=t},_convertTuplesToReferences:function(e){return r(e,function(e){return this._convertTupleToReference(e)},this)},_convertTupleToReference:function(e){var n=t(this,"store");return e.clientId?e:n.referenceForId(e.type,e.id)},rollback:function(){this._setup(),this.send("becameClean"),this.suspendRelationshipObservers(function(){this.notifyPropertyChange("data")})},toStringExtension:function(){return t(this,"id")},suspendRelationshipObservers:function(e,n){var r=t(this.constructor,"relationshipNames").belongsTo,i=this;try{this._suspendedRelationships=!0,Ember._suspendObservers(i,r,null,"belongsToDidChange",function(){Ember._suspendBeforeObservers(i,r,null,"belongsToWillChange",function(){e.call(n||i)})})}finally{this._suspendedRelationships=!1}},becameInFlight:function(){},save:function(){this.get("store").scheduleSave(this)},adapterDidUpdateAttribute:function(e,n){n!==undefined?(t(this,"data.attributes")[e]=n,this.notifyPropertyChange(e)):(n=t(this,e),t(this,"data.attributes")[e]=n),this.updateRecordArraysLater()},adapterDidInvalidate:function(e){this.send("becameInvalid",e)},adapterDidError:function(){this.send("becameError")},trigger:function(e){Ember.tryInvoke(this,e,[].slice.call(arguments,1)),this._super.apply(this,arguments)}});var s=function(e){return function(){var n=t(DS,"defaultStore"),r=[].slice.call(arguments);return r.unshift(this),n[e].apply(n,r)}};DS.Model.reopenClass({isLoaded:s("recordIsLoaded"),find:s("find"),all:s("all"),query:s("findQuery"),filter:s("filter"),_create:DS.Model.create,create:function(){throw new Ember.Error("You should not call `create` on a model. Instead, call `createRecord` with the attributes you would like to set.")},createRecord:s("createRecord")})}(),function(){function n(t,n,r){var i=e(t,"data").attributes,s=i[r];return s===undefined&&(typeof n.defaultValue=="function"?s=n.defaultValue():s=n.defaultValue),s}var e=Ember.get;DS.Model.reopenClass({attributes:Ember.computed(function(){var e=Ember.Map.create();return this.eachComputedProperty(function(t,n){n.isAttribute&&(n.name=t,e.set(t,n))}),e})});var t=DS.AttributeChange=function(e){this.reference=e.reference,this.store=e.store,this.name=e.name,this.oldValue=e.oldValue};t.createChange=function(e){return new t(e)},t.prototype={sync:function(){this.store.recordAttributeDidChange(this.reference,this.name,this.value,this.oldValue),this.destroy()},destroy:function(){delete this.store.recordForReference(this.reference)._changesToSync[this.name]}},DS.Model.reopen({eachAttribute:function(t,n){e(this.constructor,"attributes").forEach(function(e,r){t.call(n,e,r)},n)},attributeWillChange:Ember.beforeObserver(function(t,n){var r=e(t,"reference"),i=e(t,"store");t.send("willSetProperty",{reference:r,store:i,name:n})}),attributeDidChange:Ember.observer(function(e,t){e.send("didSetProperty",{name:t})})}),DS.attr=function(e,t){t=t||{};var r={type:e,isAttribute:!0,options:t};return Ember.computed(function(e,r,i){return arguments.length>1||(r=n(this,t,e)),r}).property("data").meta(r)}}(),function(){}(),function(){var e=Ember.get,t=Ember.set,n=Ember.isNone;DS.belongsTo=function(t,r){r=r||{};var i={type:t,isRelationship:!0,options:r,kind:"belongsTo"};return Ember.computed(function(r,i){typeof t=="string"&&(t=e(this,t,!1)||e(Ember.lookup,t));if(arguments.length===2)return i===undefined?null:i;var s=e(this,"data").belongsTo,o=e(this,"store"),u;return u=s[r],n(u)?null:u.clientId?o.recordForReference(u):o.findById(u.type,u.id)}).property("data").meta(i)},DS.Model.reopen({belongsToWillChange:Ember.beforeObserver(function(t,n){if(e(t,"isLoaded")){var r=e(t,n),i=e(t,"reference"),s=e(t,"store");if(r){var o=DS.RelationshipChange.createChange(i,e(r,"reference"),s,{key:n,kind:"belongsTo",changeType:"remove"});o.sync(),this._changesToSync[n]=o}}}),belongsToDidChange:Ember.immediateObserver(function(t,n){if(e(t,"isLoaded")){var r=e(t,n);if(r){var i=e(t,"reference"),s=e(t,"store"),o=DS.RelationshipChange.createChange(i,e(r,"reference"),s,{key:n,kind:"belongsTo",changeType:"add"});o.sync(),this._changesToSync[n]&&DS.OneToManyChange.ensureSameTransaction
([o,this._changesToSync[n]],s)}}delete this._changesToSync[n]})})}(),function(){function i(r,i){var s=e(r,"store"),o=e(r,"data").hasMany,u=o[i.key];if(!u)return;var a=r.constructor.inverseFor(i.key).name;n.call(u,function(e){var n;(n=e.record)&&r.suspendRelationshipObservers(function(){t(n,a,null)})})}var e=Ember.get,t=Ember.set,n=Ember.ArrayPolyfills.forEach,r=function(n,r){r=r||{};var i={type:n,isRelationship:!0,options:r,kind:"hasMany"};return Ember.computed(function(s,o){var u=e(this,"data").hasMany,a=e(this,"store"),f,l;return typeof n=="string"&&(n=e(this,n,!1)||e(Ember.lookup,n)),f=u[s],l=a.findMany(n,f,this,i),t(l,"owner",this),t(l,"name",s),t(l,"isPolymorphic",r.polymorphic),l}).property().meta(i)};DS.hasMany=function(e,t){return r(e,t)},DS.Model.reopen({clearHasMany:function(e){var t=this.cacheFor(e.name);t?t.clear():i(this,e)}})}(),function(){var e=Ember.get,t=Ember.set;DS.Model.reopen({didDefineProperty:function(e,t,n){if(n instanceof Ember.Descriptor){var r=n.meta();r.isRelationship&&r.kind==="belongsTo"&&(Ember.addObserver(e,t,null,"belongsToDidChange"),Ember.addBeforeObserver(e,t,null,"belongsToWillChange")),r.isAttribute&&(Ember.addObserver(e,t,null,"attributeDidChange"),Ember.addBeforeObserver(e,t,null,"attributeWillChange")),r.parentType=e.constructor}}}),DS.Model.reopenClass({typeForRelationship:function(t){var n=e(this,"relationshipsByName").get(t);return n&&n.type},inverseFor:function(t){function u(t,n,r){r=r||[];var i=e(n,"relationships");if(!i)return;var s=i.get(t);return s&&r.push.apply(r,i.get(t)),t.superclass&&u(t.superclass,n,r),r}var n=this.typeForRelationship(t);if(!n)return null;var r=this.metaForProperty(t).options,i,s;if(r.inverse)i=r.inverse,s=Ember.get(n,"relationshipsByName").get(i).kind;else{var o=u(this,n);if(o.length===0)return null;i=o[0].name,s=o[0].kind}return{type:n,name:i,kind:s}},relationships:Ember.computed(function(){var e=new Ember.MapWithDefault({defaultValue:function(){return[]}});return this.eachComputedProperty(function(t,n){if(n.isRelationship){typeof n.type=="string"&&(n.type=Ember.get(Ember.lookup,n.type));var r=e.get(n.type);r.push({name:t,kind:n.kind})}}),e}),relationshipNames:Ember.computed(function(){var e={hasMany:[],belongsTo:[]};return this.eachComputedProperty(function(t,n){n.isRelationship&&e[n.kind].push(t)}),e}),relatedTypes:Ember.computed(function(){var t,n=Ember.A([]);return this.eachComputedProperty(function(r,i){i.isRelationship&&(t=i.type,typeof t=="string"&&(t=e(this,t,!1)||e(Ember.lookup,t)),n.contains(t)||n.push(t))}),n}),relationshipsByName:Ember.computed(function(){var t=Ember.Map.create(),n;return this.eachComputedProperty(function(r,i){i.isRelationship&&(i.key=r,n=i.type,typeof n=="string"&&(n=e(this,n,!1)||e(Ember.lookup,n),i.type=n),t.set(r,i))}),t}),fields:Ember.computed(function(){var e=Ember.Map.create();return this.eachComputedProperty(function(t,n){n.isRelationship?e.set(t,n.kind):n.isAttribute&&e.set(t,"attribute")}),e}),eachRelationship:function(t,n){e(this,"relationshipsByName").forEach(function(e,r){t.call(n,e,r)})},eachRelatedType:function(t,n){e(this,"relatedTypes").forEach(function(e){t.call(n,e)})}}),DS.Model.reopen({eachRelationship:function(e,t){this.constructor.eachRelationship(e,t)}})}(),function(){var e=Ember.get,t=Ember.set,n=Ember.EnumerableUtils.forEach;DS.RelationshipChange=function(e){this.parentReference=e.parentReference,this.childReference=e.childReference,this.firstRecordReference=e.firstRecordReference,this.firstRecordKind=e.firstRecordKind,this.firstRecordName=e.firstRecordName,this.secondRecordReference=e.secondRecordReference,this.secondRecordKind=e.secondRecordKind,this.secondRecordName=e.secondRecordName,this.store=e.store,this.committed={},this.changeType=e.changeType},DS.RelationshipChangeAdd=function(e){DS.RelationshipChange.call(this,e)},DS.RelationshipChangeRemove=function(e){DS.RelationshipChange.call(this,e)},DS.RelationshipChange.create=function(e){return new DS.RelationshipChange(e)},DS.RelationshipChangeAdd.create=function(e){return new DS.RelationshipChangeAdd(e)},DS.RelationshipChangeRemove.create=function(e){return new DS.RelationshipChangeRemove(e)},DS.OneToManyChange={},DS.OneToNoneChange={},DS.ManyToNoneChange={},DS.OneToOneChange={},DS.ManyToManyChange={},DS.RelationshipChange._createChange=function(e){if(e.changeType==="add")return DS.RelationshipChangeAdd.create(e);if(e.changeType==="remove")return DS.RelationshipChangeRemove.create(e)},DS.RelationshipChange.determineRelationshipType=function(e,t){var n=t.key,r,i,s=t.kind,o=e.inverseFor(n);return o&&(r=o.name,i=o.kind),o?i==="belongsTo"?s==="belongsTo"?"oneToOne":"manyToOne":s==="belongsTo"?"oneToMany":"manyToMany":s==="belongsTo"?"oneToNone":"manyToNone"},DS.RelationshipChange.createChange=function(e,t,n,r){var i=e.type,s;s=DS.RelationshipChange.determineRelationshipType(i,r);if(s==="oneToMany")return DS.OneToManyChange.createChange(e,t,n,r);if(s==="manyToOne")return DS.OneToManyChange.createChange(t,e,n,r);if(s==="oneToNone")return DS.OneToNoneChange.createChange(e,t,n,r);if(s==="manyToNone")return DS.ManyToNoneChange.createChange(e,t,n,r);if(s==="oneToOne")return DS.OneToOneChange.createChange(e,t,n,r);if(s==="manyToMany")return DS.ManyToManyChange.createChange(e,t,n,r)},DS.OneToNoneChange.createChange=function(e,t,n,r){var i=r.key,s=DS.RelationshipChange._createChange({parentReference:t,childReference:e,firstRecordReference:e,store:n,changeType:r.changeType,firstRecordName:i,firstRecordKind:"belongsTo"});return n.addRelationshipChangeFor(e,i,t,null,s),s},DS.ManyToNoneChange.createChange=function(e,t,n,r){var i=r.key,s=DS.RelationshipChange._createChange({parentReference:e,childReference:t,secondRecordReference:e,store:n,changeType:r.changeType,secondRecordName:r.key,secondRecordKind:"hasMany"});return n.addRelationshipChangeFor(e,i,t,null,s),s},DS.ManyToManyChange.createChange=function(e,t,n,r){var i=r.key,s=DS.RelationshipChange._createChange({parentReference:t,childReference:e,firstRecordReference:e,secondRecordReference:t,firstRecordKind:"hasMany",secondRecordKind:"hasMany",store:n,changeType:r.changeType,firstRecordName:i});return n.addRelationshipChangeFor(e,i,t,null,s),s},DS.OneToOneChange.createChange=function(e,t,n,r){var i;r.parentType?i=r.parentType.inverseFor(r.key).name:r.key&&(i=r.key);var s=DS.RelationshipChange._createChange({parentReference:t,childReference:e,firstRecordReference:e,secondRecordReference:t,firstRecordKind:"belongsTo",secondRecordKind:"belongsTo",store:n,changeType:r.changeType,firstRecordName:i});return n.addRelationshipChangeFor(e,i,t,null,s),s},DS.OneToOneChange.maintainInvariant=function(t,n,r,i){if(t.changeType==="add"&&n.recordIsMaterialized(r)){var s=n.recordForReference(r),o=e(s,i);if(o){var u=DS.OneToOneChange.createChange(r,o.get("reference"),n,{parentType:t.parentType,hasManyName:t.hasManyName,changeType:"remove",key:t.key});n.addRelationshipChangeFor(r,i,t.parentReference,null,u),u.sync()}}},DS.OneToManyChange.createChange=function(e,t,n,r){var i;r.parentType?(i=r.parentType.inverseFor(r.key).name,DS.OneToManyChange.maintainInvariant(r,n,e,i)):r.key&&(i=r.key);var s=DS.RelationshipChange._createChange({parentReference:t,childReference:e,firstRecordReference:e,secondRecordReference:t,firstRecordKind:"belongsTo",secondRecordKind:"hasMany",store:n,changeType:r.changeType,firstRecordName:i});return n.addRelationshipChangeFor(e,i,t,null,s),s},DS.OneToManyChange.maintainInvariant=function(t,n,r,i){var s=r.record;if(t.changeType==="add"&&s){var o=e(s,i);if(o){var u=DS.OneToManyChange.createChange(r,o.get("reference"),n,{parentType:t.parentType,hasManyName:t.hasManyName,changeType:"remove",key:t.key});n.addRelationshipChangeFor(r,i,t.parentReference,null,u),u.sync()}}},DS.OneToManyChange.ensureSameTransaction=function(e){var t=Ember.A();n(e,function(e){t.addObject(e.getSecondRecord()),t.addObject(e.getFirstRecord())});var r=DS.Transaction.ensureSameTransaction(t);n(e,function(e){e.transaction=r})},DS.RelationshipChange.prototype={getSecondRecordName:function(){var e=this.secondRecordName,t;if(!e){t=this.secondRecordReference;if(!t)return;var n=this.firstRecordReference.type,r=n.inverseFor(this.firstRecordName);this.secondRecordName=r.name}return this.secondRecordName},getFirstRecordName:function(){var e=this.firstRecordName;return e},destroy:function(){var e=this.childReference,t=this.getFirstRecordName(),n=this.getSecondRecordName(),r=this.store,i;r.removeRelationshipChangeFor(e,t,this.parentReference,n,this.changeType),(i=this.transaction)&&i.relationshipBecameClean(this)},getByReference:function(e){var t=this.store;if(!e)return e;if(e.record)return e.record},getSecondRecord:function(){return this.getByReference(this.secondRecordReference)},getFirstRecord:function(){return this.getByReference(this.firstRecordReference)},ensureSameTransaction:function(){var e=this.getFirstRecord(),t=this.getSecondRecord(),n=DS.Transaction.ensureSameTransaction([e,t]);return this.transaction=n,n},callChangeEvents:function(){var t=this.getFirstRecord(),n=this.getSecondRecord(),r=new Ember.OrderedSet;n&&e(n,"isLoaded")&&this.store.recordHasManyDidChange(r,n,this),t&&this.store.recordBelongsToDidChange(r,t,this),r.forEach(function(e){e.adapterDidDirty()})},coalesce:function(){var e=this.store.relationshipChangePairsFor(this.firstRecordReference);n(e,function(e){var t=e.add,n=e.remove;t&&n&&(t.destroy(),n.destroy())})}},DS.RelationshipChangeAdd.prototype=Ember.create(DS.RelationshipChange.create({})),DS.RelationshipChangeRemove.prototype=Ember.create(DS.RelationshipChange.create({})),DS.RelationshipChangeAdd.prototype.changeType="add",DS.RelationshipChangeAdd.prototype.sync=function(){var n=this.getSecondRecordName(),r=this.getFirstRecordName(),i=this.getFirstRecord(),s=this.getSecondRecord(),o=this.ensureSameTransaction();o.relationshipBecameDirty(this),this.callChangeEvents(),s&&i&&(this.secondRecordKind==="belongsTo"?s.suspendRelationshipObservers(function(){t(s,n,i)}):this.secondRecordKind==="hasMany"&&s.suspendRelationshipObservers(function(){e(s,n).addObject(i)})),i&&s&&e(i,r)!==s&&(this.firstRecordKind==="belongsTo"?i.suspendRelationshipObservers(function(){t(i,r,s)}):this.firstRecordKind==="hasMany"&&i.suspendRelationshipObservers(function(){e(i,r).addObject(s)})),this.coalesce()},DS.RelationshipChangeRemove.prototype.changeType="remove",DS.RelationshipChangeRemove.prototype.sync=function(){var n=this.getSecondRecordName(),r=this.getFirstRecordName(),i=this.getFirstRecord(),s=this.getSecondRecord(),o=this.ensureSameTransaction(i,s,n,r);o.relationshipBecameDirty(this),this.callChangeEvents(),s&&i&&(this.secondRecordKind==="belongsTo"?s.suspendRelationshipObservers(function(){t(s,n,null)}):this.secondRecordKind==="hasMany"&&s.suspendRelationshipObservers(function(){e(s,n).removeObject(i)})),i&&e(i,r)&&(this.firstRecordKind==="belongsTo"?i.suspendRelationshipObservers(function(){t(i,r,null)}):this.firstRecordKind==="hasMany"&&i.suspendRelationshipObservers(function(){e(i,r).removeObject(s)})),this.coalesce()}}(),function(){}(),function(){var e=Ember.set;Ember.onLoad("Ember.Application",function(t){t.registerInjection?(t.registerInjection({name:"store",before:"controllers",injection:function(t,n,r){if(!n)return;r==="Store"&&e(n,"store",t[r].create())}}),t.registerInjection({name:"giveStoreToControllers",after:["store","controllers"],injection:function(e,t,n){if(!t)return;if(/^[A-Z].*Controller$/.test(n)){var r=n.charAt(0).toLowerCase()+n.substr(1),i=t.get("store"),s=t.get(r);if(!s)return;s.set("store",i)}}})):t.initializer&&(t.initializer({name:"store",initialize:function(e,t){t.register("store:main",t.Store),e.lookup("store:main")}}),t.initializer({name:"injectStore",initialize:function(e,t){t.inject("controller","store","store:main"),t.inject("route","store","store:main")}}))})}(),function(){function i(e){return function(){throw new Ember.Error("Your serializer "+this.toString()+" does not implement the required method "+e)}}var e=Ember.get,t=Ember.set,n=Ember.ArrayPolyfills.map,r=Ember.isNone;DS.Serializer=Ember.Object.extend({init:function(){this.mappings=Ember.Map.create(),this.aliases=Ember.Map.create(),this.configurations=Ember.Map.create(),this.globalConfigurations={}},extract:i("extract"),extractMany:i("extractMany"),extractId:i("extractId"),extractAttribute:i("extractAttribute"),extractHasMany:i("extractHasMany"),extractBelongsTo:i("extractBelongsTo"),extractRecordRepresentation:function(e,t,n,i){var s={},o;return i?o=e.sideload(t,n):o=e.load(t,n),this.eachEmbeddedHasMany(t,function(t,i){var u=n[this.keyFor(i)];r(u)||this.extractEmbeddedHasMany(e,i,u,o,s)},this),this.eachEmbeddedBelongsTo(t,function(t,i){var u=n[this.keyFor(i)];r(u)||this.extractEmbeddedBelongsTo(e,i,u,o,s)},this),e.prematerialize(o,s),o},extractEmbeddedHasMany:function(e,t,r,i,s){var o=n.call(r,function(n){if(!n)return;var r=this.extractEmbeddedType(t,n),s=this.extractRecordRepresentation(e,r,n,!0),o=this.embeddedType(i.type,t.key);return o==="always"&&(s.parent=i),s},this);s[t.key]=o},extractEmbeddedBelongsTo:function(e,t,n,r,i){var s=this.extractEmbeddedType(t,n),o=this.extractRecordRepresentation(e,s,n,!0);i[t.key]=o;var u=this.embeddedType(r.type,t.key);u==="always"&&(o.parent=r)},extractEmbeddedType:function(e,t){return e.type},serialize:function(t,n){n=n||{};var r=this.createSerializedForm(),i;return n.includeId&&(i=e(t,"id"))&&this._addId(r,t.constructor,i),n.includeType&&this.addType(r,t.constructor),this.addAttributes(r,t),this.addRelationships(r,t),r},serializeValue:function(e,t){var n=this.transforms?this.transforms[t]:null;return n.serialize(e)},serializeId:function(e){return isNaN(e)?e:+e},addAttributes:function(e,t){t.eachAttribute(function(n,r){this._addAttribute(e,t,n,r.type)},this)},addAttribute:i("addAttribute"),addId:i("addId"),addType:Ember.K,createSerializedForm:function(){return{}},addRelationships:function(e,t){t.eachRelationship(function(n,r){r.kind==="belongsTo"?this._addBelongsTo(e,t,n,r):r.kind==="hasMany"&&this._addHasMany(e,t,n,r)},this)},addBelongsTo:i("addBelongsTo"),addHasMany:i("addHasMany"),keyForAttributeName:function(e,t){return t},primaryKey:function(e){return"id"},keyForBelongsTo:function(e,t){return this.keyForAttributeName(e,t)},keyForHasMany:function(e,t){return this.keyForAttributeName(e,t)},materialize:function(t,n,r){var i;Ember.isNone(e(t,"id"))&&(r&&r.hasOwnProperty("id")?i=r.id:i=this.extractId(t.constructor,n),t.materializeId(i)),this.materializeAttributes(t,n,r),this.materializeRelationships(t,n,r)},deserializeValue:function(e,t){var n=this.transforms?this.transforms[t]:null;return n.deserialize(e)},materializeAttributes:function(e,t,n){e.eachAttribute(function(r,i){n&&n.hasOwnProperty(r)?e.materializeAttribute(r,n[r]):this.materializeAttribute(e,t,r,i.type)},this)},materializeAttribute:function(e,t,n,r){var i=this.extractAttribute(e.constructor,t,n);i=this.deserializeValue(i,r),e.materializeAttribute(n,i)},materializeRelationships:function(e,t,n){e.eachRelationship(function(r,i){if(i.kind==="hasMany")if(n&&n.hasOwnProperty(r)){var s=this._convertPrematerializedHasMany(i.type,n[r]);e.materializeHasMany(r,s)}else this.materializeHasMany(r,e,t,i,n);else if(i.kind==="belongsTo")if(n&&n.hasOwnProperty(r)){var o=this._convertTuple(i.type,n[r]);e.materializeBelongsTo(r,o)}else this.materializeBelongsTo(r,e,t,i,n)},this)},materializeHasMany:function(e,t,n,r){var i=t.constructor,s=this._keyForHasMany(i,r.key),o=this.extractHasMany(i,n,s),u=o;o&&Ember.isArray(o)&&(u=this._convertTuples(r.type,o)),t.materializeHasMany(e,u)},materializeBelongsTo:function(e,t,n,i){var s=t.constructor,o=this._keyForBelongsTo(s,i.key),u,a=null;i.options&&i.options.polymorphic?u=this.extractBelongsToPolymorphic(s,n,o):u=this.extractBelongsTo(s,n,o),r(u)||(a=this._convertTuple(i.type,u)),t.materializeBelongsTo(e,a)},_extractEmbeddedRelationship:function(e,t,n,r){var i=this["_keyFor"+r](e,n);if(this.embeddedType(e,n))return this["extractEmbedded"+r](e,t,i)},_extractEmbeddedBelongsTo:function(e,t,n){return this._extractEmbeddedRelationship(e,t,n,"BelongsTo")},_extractEmbeddedHasMany:function(e,t,n){return this._extractEmbeddedRelationship(e,t,n,"HasMany")},_convertPrematerializedHasMany:function(e,t){var n;return typeof t=="string"?n=t:n=this._convertTuples(e,t),n},_convertTuples:function(e,t){return n.call(t,function(t){return this._convertTuple(e,t)},this)},_convertTuple:function(e,t){var n;return typeof t=="object"?DS.Model.detect(t.type)?t:(n=this.typeFromAlias(t.type),{id:t.id,type:n}):{id:t,type:e}},_primaryKey:function(e){var t=this.configurationForType(e),n=t&&t.primaryKey;return n?n:this.primaryKey(e)},_addAttribute:function(t,n,r,i){var s=this._keyForAttributeName(n.constructor,r),o=e(n,r);this.addAttribute(t,s,this.serializeValue(o,i))},_addId:function(e,t,n){var r=this._primaryKey(t);this.addId(e,r,this.serializeId(n))},_keyForAttributeName:function(e,t){return this._keyFromMappingOrHook("keyForAttributeName",e,t)},_keyForBelongsTo:function(e,t){return this._keyFromMappingOrHook("keyForBelongsTo",e,t)},keyFor:function(e){var t=e.parentType,n=e.key;switch(e.kind){case"belongsTo":return this._keyForBelongsTo(t,n);case"hasMany":return this._keyForHasMany(t,n)}},_keyForHasMany:function(e,t){return this._keyFromMappingOrHook("keyForHasMany",e,t)},_addBelongsTo:function(e,t,n,r){var i=this._keyForBelongsTo(t.constructor,n);this.addBelongsTo(e,t,i,r)},_addHasMany:function(e,t,n,r){var i=this._keyForHasMany(t.constructor,n);this.addHasMany(e,t,i,r)},_keyFromMappingOrHook:function(e,t,n){var r=this.mappingOption(t,n,"key");return r?r:this[e](t,n)},registerTransform:function(e,t){this.transforms[e]=t},registerEnumTransform:function(e,t){var n={deserialize:function(e){return Ember.A(t).objectAt(e)},serialize:function(e){return Ember.EnumerableUtils.indexOf(t,e)},values:t};this.registerTransform(e,n)},map:function(e,t){this.mappings.set(e,t)},configure:function(e,t){if(e&&!t){Ember.merge(this.globalConfigurations,e);return}var n,r;t.alias&&(r=t.alias,this.aliases.set(r,e),delete t.alias),n=Ember.create(this.globalConfigurations),Ember.merge(n,t),this.configurations.set(e,n)},typeFromAlias:function(e){return this._completeAliases(),this.aliases.get(e)},mappingForType:function(e){return this._reifyMappings(),this.mappings.get(e)||{}},configurationForType:function(e){return this._reifyConfigurations(),this.configurations.get(e)||this.globalConfigurations},_completeAliases:function(){this._pluralizeAliases(),this._reifyAliases()},_pluralizeAliases:function(){if(this._didPluralizeAliases)return;var e=this.aliases,t=this.aliases.sideloadMapping,n,r=this;e.forEach(function(t,i){n=r.pluralize(t),e.set(n,i)}),t&&(t.forEach(function(t,n){e.set(t,n)}),delete this.aliases.sideloadMapping),this._didPluralizeAliases=!0},_reifyAliases:function(){if(this._didReifyAliases)return;var e=this.aliases,t=Ember.Map.create(),n;e.forEach(function(e,r){typeof r=="string"?(n=Ember.get(Ember.lookup,r),t.set(e,n)):t.set(e,r)}),this.aliases=t,this._didReifyAliases=!0},_reifyMappings:function(){if(this._didReifyMappings)return;var e=this.mappings,t=Ember.Map.create();e.forEach(function(e,n){if(typeof e=="string"){var r=Ember.get(Ember.lookup,e);t.set(r,n)}else t.set(e,n)}),this.mappings=t,this._didReifyMappings=!0},_reifyConfigurations:function(){if(this._didReifyConfigurations)return;var e=this.configurations,t=Ember.Map.create();e.forEach(function(e,n){if(typeof e=="string"&&e!=="plurals"){var r=Ember.get(Ember.lookup,e);t.set(r,n)}else t.set(e,n)}),this.configurations=t,this._didReifyConfigurations=!0},mappingOption:function(e,t,n){var r=this.mappingForType(e)[t];return r&&r[n]},configOption:function(e,t){var n=this.configurationForType(e);return n[t]},embeddedType:function(e,t){return this.mappingOption(e,t,"embedded")},eachEmbeddedRecord:function(e,t,n){this.eachEmbeddedBelongsToRecord(e,t,n),this.eachEmbeddedHasManyRecord(e,t,n)},eachEmbeddedBelongsToRecord:function(t,n,r){this.eachEmbeddedBelongsTo(t.constructor,function(i,s,o){var u=e(t,i);u&&n.call(r,u,o)})},eachEmbeddedHasManyRecord:function(t,n,r){this.eachEmbeddedHasMany(t.constructor,function(i,s,o){var u=e(t,i);for(var a=0,f=e(u,"length");a<f;a++)n.call(r,u.objectAt(a),o)})},eachEmbeddedHasMany:function(e,t,n){this.eachEmbeddedRelationship(e,"hasMany",t,n)},eachEmbeddedBelongsTo:function(e,t,n){this.eachEmbeddedRelationship(e,"belongsTo",t,n)},eachEmbeddedRelationship:function(e,t,n,r){e.eachRelationship(function(i,s){var o=this.embeddedType(e,i);o&&s.kind===t&&n.call(r,i,s,o)},this)},pluralize:function(e){var t=this.configurations.get("plurals");return t&&t[e]||e+"s"},singularize:function(e){var t=this.configurations.get("plurals");if(t)for(var n in t)if(t[n]===e)return n;return e.lastIndexOf("s")===e.length-1?e.substring(0,e.length-1):e}})}(),function(){var e=Ember.isNone,t=Ember.isEmpty;DS.JSONTransforms={string:{deserialize:function(t){return e(t)?null:String(t)},serialize:function(t){return e(t)?null:String(t)}},number:{deserialize:function(e){return t(e)?null:Number(e)},serialize:function(e){return t(e)?null:Number(e)}},"boolean":{deserialize:function(e){var t=typeof e;return t==="boolean"?e:t==="string"?e.match(/^true$|^t$|^1$/i)!==null:t==="number"?e===1:!1},serialize:function(e){return Boolean(e)}},date:{deserialize:function(e){var t=typeof e;return t==="string"?new Date(Ember.Date.parse(e)):t==="number"?new Date(e):e===null||e===undefined?e:null},serialize:function(e){if(e instanceof Date){var t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=function(e){return e<10?"0"+e:""+e},i=e.getUTCFullYear(),s=e.getUTCMonth(),o=e.getUTCDate(),u=e.getUTCDay(),a=e.getUTCHours(),f=e.getUTCMinutes(),l=e.getUTCSeconds(),c=t[u],h=r(o),p=n[s];return c+", "+h+" "+p+" "+i+" "+r(a)+":"+r(f)+":"+r(l)+" GMT"}return null}}}}(),function(){var e=Ember.get,t=Ember.set;DS.JSONSerializer=DS.Serializer.extend({init:function(){this._super(),e(this,"transforms")||this.set("transforms",DS.JSONTransforms),this.sideloadMapping=Ember.Map.create(),this.metadataMapping=Ember.Map.create(),this.configure({meta:"meta",since:"since"})},configure:function(t,n){var r;if(t&&!n){for(r in t)this.metadataMapping.set(e(t,r),r);return this._super(t)}var i=n.sideloadAs,s;i&&(s=this.aliases.sideloadMapping||Ember.Map.create(),s.set(i,t),this.aliases.sideloadMapping=s,delete n.sideloadAs),this._super.apply(this,arguments)},addId:function(e,t,n){e[t]=n},addAttribute:function(e,t,n){e[t]=n},extractAttribute:function(e,t,n){var r=this._keyForAttributeName(e,n);return t[r]},extractId:function(e,t){var n=this._primaryKey(e);return t.hasOwnProperty(n)?t[n]+"":null},extractHasMany:function(e,t,n){return t[n]},extractBelongsTo:function(e,t,n){return t[n]},extractBelongsToPolymorphic:function(e,t,n){var r=this.keyForPolymorphicId(n),i,s=t[r];return s?(i=this.keyForPolymorphicType(n),{id:s,type:t[i]}):null},addBelongsTo:function(t,n,r,i){var s=n.constructor,o=i.key,u=null,a=i.options&&i.options.polymorphic,f,l,c;if(this.embeddedType(s,o)){if(f=e(n,o))u=this.serialize(f,{includeId:!0,includeType:a});t[r]=u}else l=e(n,i.key),c=e(l,"id"),i.options&&i.options.polymorphic&&!Ember.isNone(c)?this.addBelongsToPolymorphic(t,r,c,l.constructor):t[r]=c===undefined?null:this.serializeId(c)},addBelongsToPolymorphic:function(e,t,n,r){var i=this.keyForPolymorphicId(t),s=this.keyForPolymorphicType(t);e[i]=n,e[s]=this.rootForType(r)},addHasMany:function(t,n,r,i){var s=n.constructor,o=i.key,u=[],a=i.options&&i.options.polymorphic,f,l;l=this.embeddedType(s,o);if(l!=="always")return;f=e(n,o),f.forEach(function(e){u.push(this.serialize(e,{includeId:!0,includeType:a}))},this),t[r]=u},addType:function(e,t){var n=this.keyForEmbeddedType();e[n]=this.rootForType(t)},extract:function(e,t,n,r){var i=this.rootForType(n);this.sideload(e,n,t,i),this.extractMeta(e,n,t),t[i]&&(r&&e.updateId(r,t[i]),this.extractRecordRepresentation(e,n,t[i]))},extractMany:function(e,t,n,r){var i=this.rootForType(n);i=this.pluralize(i),this.sideload(e,n,t,i),this.extractMeta(e,n,t);if(t[i]){var s=t[i],o=[];r&&(r=r.toArray());for(var u=0;u<s.length;u++){r&&e.updateId(r[u],s[u]);var a=this.extractRecordRepresentation(e,n,s[u]);o.push(a)}e.populateArray(o)}},extractMeta:function(e,t,n){var r=this.configOption(t,"meta"),i=n,s;r&&n[r]&&(i=n[r]),this.metadataMapping.forEach(function(n,r){(s=i[n])&&e.metaForType(t,r,s)})},extractEmbeddedType:function(e,t){var n=e.type;if(e.options&&e.options.polymorphic){var r=this.keyFor(e),i=this.keyForEmbeddedType(r);n=this.typeFromAlias(t[i]),delete t[i]}return n},sideload:function(e,t,n,r){var i;this.configureSideloadMappingForType(t);for(var s in n){if(!n.hasOwnProperty(s)||s===r||!!this.metadataMapping.get(s))continue;i=this.typeFromAlias(s),this.loadValue(e,i,n[s])}},configureSideloadMappingForType:function(e,t){t||(t=Ember.A([])),t.pushObject(e),e.eachRelatedType(function(e){if(!t.contains(e)){var n=this.defaultSideloadRootForType(e);this.aliases.set(n,e),this.configureSideloadMappingForType(e,t)}},this)},loadValue:function(e,t,n){if(n instanceof Array)for(var r=0;r<n.length;r++)e.sideload(t,n[r]);else e.sideload(t,n)},keyForPolymorphicId:Ember.K,keyForPolymorphicType:Ember.K,keyForEmbeddedType:function(){return"type"},rootForType:function(e){var t=e.toString(),n=t.split("."),r=n[n.length-1];return r.replace(/([A-Z])/g,"_$1").toLowerCase().slice(1)},defaultSideloadRootForType:function(e){return this.pluralize(this.rootForType(e))}})}(),function(){function r(e){return{load:function(t,n,r){return e.load(t,n,r)},loadMany:function(t,n){return e.loadMany(t,n)},updateId:function(t,n){return e.updateId(t,n)},populateArray:Ember.K,sideload:function(t,n){return e.load(t,n)},sideloadMany:function(t,n){return e.loadMany(t,n)},prematerialize:function(e,t){e.prematerialized=t},metaForType:function(t,n,r){e.metaForType(t,n,r)}}}var e=Ember.get,t=Ember.set,n=Ember.merge;DS.loaderFor=r,DS.Adapter=Ember.Object.extend(DS._Mappable,{init:function(){var n=e(this,"serializer");Ember.Object.detect(n)&&(n=n.create(),t(this,"serializer",n)),this._attributesMap=this.createInstanceMapFor("attributes"),this._configurationsMap=this.createInstanceMapFor("configurations"),this._outstandingOperations=new Ember.MapWithDefault({defaultValue:function(){return 0}}),this._dependencies=new Ember.MapWithDefault({defaultValue:function(){return new Ember.OrderedSet}}),this.registerSerializerTransforms(this.constructor,n,{}),this.registerSerializerMappings(n)},load:function(t,n,i){var s=r(t);e(this,"serializer").extractRecordRepresentation(s,n,i)},didCreateRecord:function(t,n,r,i){t.didSaveRecord(r);if(i){var s=DS.loaderFor(t);s.load=function(e,n,i){return t.updateId(r,n),t.load(e,n,i)},e(this,"serializer").extract(s,i,n)}},didCreateRecords:function(t,n,r,i){r.forEach(function(e){t.didSaveRecord(e)},this);if(i){var s=DS.loaderFor(t);e(this,"serializer").extractMany(s,i,n,r)}},didSaveRecord:function(t,n,r,i){t.didSaveRecord(r);var s=e(this,"serializer");s.eachEmbeddedRecord(r,function(e,n){if(n==="load")return;this.didSaveRecord(t,e.constructor,e)},this);if(i){var o=DS.loaderFor(t);s.extract(o,i,n)}},didUpdateRecord:function(){this.didSaveRecord.apply(this,arguments)},didDeleteRecord:function(){this.didSaveRecord.apply(this,arguments)},didSaveRecords:function(t,n,r,i){r.forEach(function(e){t.didSaveRecord(e)},this);if(i){var s=DS.loaderFor(t);e(this,"serializer").extractMany(s,i,n)}},didUpdateRecords:function(){this.didSaveRecords.apply(this,arguments)},didDeleteRecords:function(){this.didSaveRecords.apply(this,arguments)},didFindRecord:function(t,n,r,i){var s=DS.loaderFor(t);s.load=function(e,n,r){return r=r||{},r.id=i,t.load(e,n,r)},e(this,"serializer").extract(s,r,n)},didFindAll:function(t,n,r){var i=DS.loaderFor(t),s=e(this,"serializer");t.didUpdateAll(n),s.extractMany(i,r,n)},didFindQuery:function(t,n,r,i){var s=DS.loaderFor(t);s.populateArray=function(e){i.load(e)},e(this,"serializer").extractMany(s,r,n)},didFindMany:function(t,n,r){var i=DS.loaderFor(t);e(this,"serializer").extractMany(i,r,n)},didError:function(e,t,n){e.recordWasError(n)},dirtyRecordsForAttributeChange:function(e,t,n,r,i){r!==i&&this.dirtyRecordsForRecordChange(e,t)},dirtyRecordsForRecordChange:function(e,t){e.add(t)},dirtyRecordsForBelongsToChange:function(e,t){this.dirtyRecordsForRecordChange(e,t)},dirtyRecordsForHasManyChange:function(e,t){this.dirtyRecordsForRecordChange(e,t)},registerSerializerTransforms:function(e,t,n){var r=e._registeredTransforms,i,s,o=e._registeredEnumTransforms;for(s in r){if(!r.hasOwnProperty(s)||s in n)continue;n[s]=!0,t.registerTransform(s,r[s])}for(s in o){if(!o.hasOwnProperty(s)||s in n)continue;n[s]=!0,t.registerEnumTransform(s,o[s])}(i=e.superclass)&&this.registerSerializerTransforms(i,t,n)},registerSerializerMappings:function(e){var t=this._attributesMap,n=this._configurationsMap;t.forEach(e.map,e),n.forEach(e.configure,e)},find:null,serializer:DS.JSONSerializer,registerTransform:function(t,n){e(this,"serializer").registerTransform(t,n)},registerEnumTransform:function(t,n){e(this,"serializer").registerEnumTransform(t,n)},generateIdForRecord:null,materialize:function(t,n,r){e(this,"serializer").materialize(t,n,r)},serialize:function(t,n){return e(this,"serializer").serialize(t,n)},extractId:function(t,n){return e(this,"serializer").extractId(t,n)},groupByType:function(e){var t=Ember.MapWithDefault.create({defaultValue:function(){return Ember.OrderedSet.create()}});return e.forEach(function(e){t.get(e.constructor).add(e)}),t},commit:function(e,t){this.save(e,t)},save:function(e,t){function r(e){var t=Ember.OrderedSet.create();return e.forEach(function(e){n.shouldSave(e)&&t.add(e)}),t}var n=this;this.groupByType(t.created).forEach(function(t,n){this.createRecords(e,t,r(n))},this),this.groupByType(t.updated).forEach(function(t,n){this.updateRecords(e,t,r(n))},this),this.groupByType(t.deleted).forEach(function(t,n){this.deleteRecords(e,t,r(n))},this)},shouldSave:Ember.K,createRecords:function(e,t,n){n.forEach(function(n){this.createRecord(e,t,n)},this)},updateRecords:function(e,t,n){n.forEach(function(n){this.updateRecord(e,t,n)},this)},deleteRecords:function(e,t,n){n.forEach(function(n){this.deleteRecord(e,t,n)},this)},findMany:function(e,t,n){n.forEach(function(n){this.find(e,t,n)},this)}}),DS.Adapter.reopenClass({registerTransform:function(e,t){var n=this._registeredTransforms||{};n[e]=t,this._registeredTransforms=n},registerEnumTransform:function(e,t){var n=this._registeredEnumTransforms||{};n[e]=t,this._registeredEnumTransforms=n},map:DS._Mappable.generateMapFunctionFor("attributes",function(e,t,r){var i=r.get(e);n(i,t)}),configure:DS._Mappable.generateMapFunctionFor("configurations",function(e,t,r){var i=r.get(e),s=t&&t.mappings;s&&(this.map(e,s),delete t.mappings),n(i,t)}),resolveMapConflict:function(e,t){return n(t,e),t}})}(),function(){var e=Ember.get,t=Ember.set;DS.FixtureSerializer=DS.Serializer.extend({deserializeValue:function(e,t){return e},serializeValue:function(e,t){return e},addId:function(e,t,n){e[t]=n},addAttribute:function(e,t,n){e[t]=n},addBelongsTo:function(t,n,r,i){var s=e(n,i.key+".id");Ember.isNone(s)||(t[r]=s)},addHasMany:function(t,n,r,i){var s=e(n,i.key).map(function(e){return e.get("id")});t[i.key]=s},extract:function(e,t,n,r){r&&e.updateId(r,t),this.extractRecordRepresentation(e,n,t)},extractMany:function(e,t,n,r){var i=t,s=[];r&&(r=r.toArray());for(var o=0;o<i.length;o++){r&&e.updateId(r[o],i[o]);var u=this.extractRecordRepresentation(e,n,i[o]);s.push(u)}e.populateArray(s)},extractId:function(e,t){var n=this._primaryKey(e);return t.hasOwnProperty(n)?t[n]+"":null},extractAttribute:function(e,t,n){var r=this._keyForAttributeName(e,n);return t[r]},extractHasMany:function(e,t,n){return t[n]},extractBelongsTo:function(e,t,n){return t[n]},extractBelongsToPolymorphic:function(e,t,n){var r=this.keyForPolymorphicId(n),i,s=t[r];return s?(i=this.keyForPolymorphicType(n),{id:s,type:t[i]}):null},keyForPolymorphicId:function(e){return e},keyForPolymorphicType:function(e){return e+"_type"}})}(),function(){var e=Ember.get,t=Ember.String.fmt,n=Ember.get(window,"JSON.stringify")||function(e){return e.toString()};DS.FixtureAdapter=DS.Adapter.extend({simulateRemoteResponse:!0,latency:50,serializer:DS.FixtureSerializer,fixturesForType:function(e){if(e.FIXTURES){var r=Ember.A(e.FIXTURES);return r.map(function(e){if(!e.id)throw new Error(t("the id property must be defined for fixture %@",[n(e)]));return e.id=e.id+"",e})}return null},queryFixtures:function(e,t,n){},updateFixtures:function(e,t){e.FIXTURES||(e.FIXTURES=[]);var n=e.FIXTURES;this.deleteLoadedFixture(e,t),n.push(t)},mockJSON:function(e,t){return this.serialize(t,{includeId:!0})},generateIdForRecord:function(e,t){return Ember.guidFor(t)},find:function(e,t,n){var r=this.fixturesForType
(t),i;r&&(i=Ember.A(r).findProperty("id",n)),i&&this.simulateRemoteCall(function(){this.didFindRecord(e,t,i,n)},this)},findMany:function(e,t,n){var r=this.fixturesForType(t);r&&(r=r.filter(function(e){return n.indexOf(e.id)!==-1})),r&&this.simulateRemoteCall(function(){this.didFindMany(e,t,r)},this)},findAll:function(e,t){var n=this.fixturesForType(t);this.simulateRemoteCall(function(){this.didFindAll(e,t,n)},this)},findQuery:function(e,t,n,r){var i=this.fixturesForType(t);i=this.queryFixtures(i,n,t),i&&this.simulateRemoteCall(function(){this.didFindQuery(e,t,i,r)},this)},createRecord:function(e,t,n){var r=this.mockJSON(t,n);this.updateFixtures(t,r),this.simulateRemoteCall(function(){this.didCreateRecord(e,t,n,r)},this)},updateRecord:function(e,t,n){var r=this.mockJSON(t,n);this.updateFixtures(t,r),this.simulateRemoteCall(function(){this.didUpdateRecord(e,t,n,r)},this)},deleteRecord:function(e,t,n){var r=this.mockJSON(t,n);this.deleteLoadedFixture(t,r),this.simulateRemoteCall(function(){this.didDeleteRecord(e,t,n)},this)},deleteLoadedFixture:function(e,t){var n=this.findExistingFixture(e,t);if(n){var r=e.FIXTURES.indexOf(n);return e.FIXTURES.splice(r,1),!0}},findExistingFixture:function(e,t){var n=this.fixturesForType(e),r=this.extractId(e,t);return this.findFixtureById(n,r)},findFixtureById:function(t,n){return Ember.A(t).find(function(t){return""+e(t,"id")==""+n?!0:!1})},simulateRemoteCall:function(t,n){e(this,"simulateRemoteResponse")?Ember.run.later(n,t,e(this,"latency")):Ember.run.once(n,t)}})}(),function(){var e=Ember.get;DS.RESTSerializer=DS.JSONSerializer.extend({keyForAttributeName:function(e,t){return Ember.String.decamelize(t)},keyForBelongsTo:function(e,t){var n=this.keyForAttributeName(e,t);return this.embeddedType(e,t)?n:n+"_id"},keyForHasMany:function(e,t){var n=this.keyForAttributeName(e,t);return this.embeddedType(e,t)?n:this.singularize(n)+"_ids"},keyForPolymorphicId:function(e){return e},keyForPolymorphicType:function(e){return e.replace(/_id$/,"_type")},extractValidationErrors:function(t,n){var r={};return e(t,"attributes").forEach(function(e){var i=this._keyForAttributeName(t,e);n.errors.hasOwnProperty(i)&&(r[e]=n.errors[i])},this),r}})}(),function(){var e=Ember.get,t=Ember.set;DS.RESTAdapter=DS.Adapter.extend({namespace:null,bulkCommit:!1,since:"since",serializer:DS.RESTSerializer,init:function(){this._super.apply(this,arguments)},shouldSave:function(t){var n=e(t,"reference");return!n.parent},dirtyRecordsForRecordChange:function(e,t){this._dirtyTree(e,t)},dirtyRecordsForHasManyChange:function(t,n,r){var i=e(this,"serializer").embeddedType(n.constructor,r.secondRecordName);i==="always"&&(r.childReference.parent=r.parentReference,this._dirtyTree(t,n))},_dirtyTree:function(t,n){t.add(n),e(this,"serializer").eachEmbeddedRecord(n,function(e,n){if(n!=="always")return;if(t.has(e))return;this._dirtyTree(t,e)},this);var r=n.get("reference");if(r.parent){var i=e(n,"store"),s=i.recordForReference(r.parent);this._dirtyTree(t,s)}},createRecord:function(e,t,n){var r=this.rootForType(t),i={};i[r]=this.serialize(n,{includeId:!0}),this.ajax(this.buildURL(r),"POST",{data:i,success:function(r){Ember.run(this,function(){this.didCreateRecord(e,t,n,r)})},error:function(r){this.didError(e,t,n,r)}})},createRecords:function(t,n,r){if(e(this,"bulkCommit")===!1)return this._super(t,n,r);var i=this.rootForType(n),s=this.pluralize(i),o={};o[s]=[],r.forEach(function(e){o[s].push(this.serialize(e,{includeId:!0}))},this),this.ajax(this.buildURL(i),"POST",{data:o,success:function(e){Ember.run(this,function(){this.didCreateRecords(t,n,r,e)})}})},updateRecord:function(t,n,r){var i=e(r,"id"),s=this.rootForType(n),o={};o[s]=this.serialize(r),this.ajax(this.buildURL(s,i),"PUT",{data:o,success:function(e){Ember.run(this,function(){this.didUpdateRecord(t,n,r,e)})},error:function(e){this.didError(t,n,r,e)}})},updateRecords:function(t,n,r){if(e(this,"bulkCommit")===!1)return this._super(t,n,r);var i=this.rootForType(n),s=this.pluralize(i),o={};o[s]=[],r.forEach(function(e){o[s].push(this.serialize(e,{includeId:!0}))},this),this.ajax(this.buildURL(i,"bulk"),"PUT",{data:o,success:function(e){Ember.run(this,function(){this.didUpdateRecords(t,n,r,e)})}})},deleteRecord:function(t,n,r){var i=e(r,"id"),s=this.rootForType(n);this.ajax(this.buildURL(s,i),"DELETE",{success:function(e){Ember.run(this,function(){this.didDeleteRecord(t,n,r,e)})},error:function(e){this.didError(t,n,r,e)}})},deleteRecords:function(t,n,r){if(e(this,"bulkCommit")===!1)return this._super(t,n,r);var i=this.rootForType(n),s=this.pluralize(i),o=e(this,"serializer"),u={};u[s]=[],r.forEach(function(t){u[s].push(o.serializeId(e(t,"id")))}),this.ajax(this.buildURL(i,"bulk"),"DELETE",{data:u,success:function(e){Ember.run(this,function(){this.didDeleteRecords(t,n,r,e)})}})},find:function(e,t,n){var r=this.rootForType(t);this.ajax(this.buildURL(r,n),"GET",{success:function(r){Ember.run(this,function(){this.didFindRecord(e,t,r,n)})}})},findAll:function(e,t,n){var r=this.rootForType(t);this.ajax(this.buildURL(r),"GET",{data:this.sinceQuery(n),success:function(n){Ember.run(this,function(){this.didFindAll(e,t,n)})}})},findQuery:function(e,t,n,r){var i=this.rootForType(t);this.ajax(this.buildURL(i),"GET",{data:n,success:function(n){Ember.run(this,function(){this.didFindQuery(e,t,n,r)})}})},findMany:function(e,t,n,r){var i=this.rootForType(t);n=this.serializeIds(n),this.ajax(this.buildURL(i),"GET",{data:{ids:n},success:function(n){Ember.run(this,function(){this.didFindMany(e,t,n)})}})},serializeIds:function(t){var n=e(this,"serializer");return Ember.EnumerableUtils.map(t,function(e){return n.serializeId(e)})},didError:function(t,n,r,i){if(i.status===422){var s=JSON.parse(i.responseText),o=e(this,"serializer"),u=o.extractValidationErrors(n,s);t.recordWasInvalid(r,u)}else this._super.apply(this,arguments)},ajax:function(e,t,n){n.url=e,n.type=t,n.dataType="json",n.contentType="application/json; charset=utf-8",n.context=this,n.data&&t!=="GET"&&(n.data=JSON.stringify(n.data)),jQuery.ajax(n)},url:"",rootForType:function(t){var n=e(this,"serializer");return n.rootForType(t)},pluralize:function(t){var n=e(this,"serializer");return n.pluralize(t)},buildURL:function(e,t){var n=[this.url];return Ember.isNone(this.namespace)||n.push(this.namespace),n.push(this.pluralize(e)),t!==undefined&&n.push(t),n.join("/")},sinceQuery:function(t){var n={};return n[e(this,"since")]=t,t?n:null}})}(),function(){function u(t){var n;for(var r in t)n=t[r],delete t[r],t[e(r)]=n}function a(e,t,n){t(e,n)}function f(e,t,r){var s=i[r];n(t,"attributes").forEach(function(t,n){var r=n.type,i=e[t],u=s[r]||o[r];e[t]=u.deserialize(i)})}function l(e,t,n){this.json=e,this.type=t,this.store=n}function c(){l.apply(this,arguments)}function h(e,t){return function(n,r){return new c(n,r||t,e)}}function p(e,t,n,r){this.json=e,this.type=t,this.array=n,this.store=r}function d(e,t,n){return function(r){return new p(r,t,n,e)}}function m(e,t,n){return function(r){return new v(r,e,t,n)}}function g(e,t,n){this.record=t,l.call(this,e,t.constructor,n),e||this.done()}function y(e,t){return function(n){return new g(n,t,e)}}function b(e,t,n,r){this.record=e,l.call(this,e.toJSON({includeId:r}),n,t)}function w(e,t,n){return function(r){return new b(r,e,t,n)}}var e=Ember.String.camelize,t=Ember.String.capitalize,n=Ember.get,r=Ember.ArrayPolyfills.map,i,s={serialize:function(e){return e},deserialize:function(e){return e}},o={string:s,"boolean":s,number:s};l.prototype={camelizeKeys:function(){return u(this.json),this},munge:function(e){return a(this.json,e,h(this.store,this.type)),this},applyTransforms:function(e){return f(this.json,this.type,e),this}},c.prototype=Ember.create(l.prototype),c.prototype.load=function(){this.store.load(this.type,{},this.json)},p.prototype={load:function(){var e=this.store,t=this.type,n=this.json.map(function(n){return e.load(t,{},n)});this.array.load(n)},camelizeKeys:function(){return this.json.forEach(u),this},munge:function(e){return this.json.forEach(function(t){a(t,e,h(this.store,this.type))},this),this},applyTransforms:function(e){var t=this.type;return this.json.forEach(function(n){f(n,t,e)}),this}};var v=function(e,t,n,r){this.json=e,this.store=t,this.record=n,this.type=n.constructor,this.relationship=r};v.prototype=Ember.create(p.prototype),v.prototype.load=function(){var e=this.store,t=r.call(this.json,function(e){return e.id});e.loadMany(this.relationship.type,this.json),e.loadHasMany(this.record,this.relationship.key,t)},g.prototype=Ember.create(l.prototype),g.prototype.done=function(){this.store.didSaveRecord(this.record,this.json)},b.prototype=Ember.create(l.prototype),b.prototype.save=function(e){e(this.json,y(this.store,this.record))},DS.BasicAdapter=DS.Adapter.extend({find:function(e,t,n){var r=t.sync;r.find(n,h(e,t))},findQuery:function(e,t,n,r){var i=t.sync;i.query(n,d(e,t,r))},findHasMany:function(e,n,r,i){var s=t(r.key),o=n.constructor.sync,u=m(e,n,r),a={relationship:r.key,data:i};o["find"+s]?o["find"+s](n,a,u):o.findHasMany&&o.findHasMany(n,a,u)},createRecord:function(e,t,n){var r=t.sync;r.createRecord(n,w(e,t))},updateRecord:function(e,t,n){var r=t.sync;r.updateRecord(n,w(e,t,!0))},deleteRecord:function(e,t,n){var r=t.sync;r.deleteRecord(n,w(e,t,!0))}}),DS.registerTransforms=function(e,t){i[e]=t},DS.clearTransforms=function(){i={}},DS.clearTransforms()}(),function(){}(),function(){}(),typeof location!="undefined"&&(location.hostname==="localhost"||location.hostname==="127.0.0.1")&&console.warn("You are running a production build of Ember on localhost and won't receive detailed error messages. If you want full error messages please use the non-minified build provided on the Ember website.");